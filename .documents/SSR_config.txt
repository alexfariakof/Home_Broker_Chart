ng add @nguniversal/express-engine


main.server.ts
// main.server.ts

import { enableProdMode } from '@angular/core';
import { environment } from './environments/environment';
import { AppServerModule } from './app/app.server.module'; // Certifique-se de ajustar conforme a estrutura do seu projeto

if (environment.production) {
  enableProdMode();
}

export { AppServerModule };


// app.server.module.ts

import { NgModule } from '@angular/core';
import { ServerModule } from '@angular/platform-server';
import { AppModule } from './app.module';
import { AppComponent } from './app.component';

@NgModule({
  imports: [
    ServerModule,
    AppModule,
  ],
  bootstrap: [AppComponent],
})
export class AppServerModule {}

{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/app-server",
    "module": "commonjs",
    "types": []
  },
  "files": [
    "src/main.server.ts",
    "server/**/*.ts"
  ],
  "include": [
    "src/**/*.d.ts"
  ]
}
